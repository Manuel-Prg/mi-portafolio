---
interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="gradient-bg"></div>
  <slot />
  
  <script>
    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    
    // Intentar cargar tema guardado (solo funcionará en producción)
    try {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'light') {
        document.body.classList.add('light-mode');
      }
    } catch (e) {
      // localStorage no disponible, usar tema oscuro por defecto
    }

    themeToggle?.addEventListener('click', () => {
      document.body.classList.toggle('light-mode');
      
      // Intentar guardar tema (solo funcionará en producción)
      try {
        const isLight = document.body.classList.contains('light-mode');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
      } catch (e) {
        // localStorage no disponible
      }
    });

    // Animación suave al hacer scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', (e) => {
        e.preventDefault();
        const href = anchor.getAttribute('href');
        if (href) {
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        }
      });
    });

    // Animación de aparición al hacer scroll
    const observerOptions: IntersectionObserverInit = {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && entry.target instanceof HTMLElement) {
          entry.target.style.animation = 'fadeInUp 0.6s ease-out forwards';
        }
      });
    }, observerOptions);

    document.querySelectorAll('.project-card, .skill-badge').forEach(el => {
      if (el instanceof HTMLElement) {
        el.style.opacity = '0';
        observer.observe(el);
      }
    });
  </script>
</body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #0a0a0a;
    color: #ffffff;
    overflow-x: hidden;
    transition: background 0.3s, color 0.3s;
  }

  body.light-mode {
    background: #f5f5f5;
    color: #1a1a1a;
  }

  .gradient-bg {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 20%, rgba(120, 40, 200, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(200, 40, 120, 0.15) 0%, transparent 50%);
    z-index: -1;
    transition: background 0.3s;
  }

  body.light-mode .gradient-bg {
    background: radial-gradient(circle at 20% 20%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.1) 0%, transparent 50%);
  }
</style>